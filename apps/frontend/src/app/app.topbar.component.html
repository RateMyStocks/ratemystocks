<div class="layout-topbar">
  <div class="layout-topbar-wrapper">
    <div class="layout-topbar-left">
      <div class="layout-topbar-logo" id="logolink" style="cursor: pointer; outline: none;" routerLink="/">
        <img
          id="app-logo"
          [src]="
            'assets/layout/images/logo-' +
            (app.topbarTheme === 'light' ? 'ratemystocks' : 'ratemystocks-dark-theme') +
            '.png'
          "
        />
      </div>
    </div>

    <div class="layout-topbar-right">
      <a class="menu-button" href="#" (click)="appMain.onMenuButtonClick($event)">
        <i class="pi pi-bars"></i>
      </a>

      <ul class="layout-topbar-actions">
        <li #searchItem class="search-item topbar-item" [ngClass]="{ 'active-topmenuitem': appMain.search }">
          <a href="#" (click)="appMain.onTopbarItemClick($event, searchItem)">
            <span class="topbar-icon">
              <i class="pi pi-search"></i>
            </span>
          </a>

          <div class="search-input-wrapper">
            <span class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input type="text" pInputText placeholder="Search..." />
            </span>
          </div>

          <ul class="fadeInDown">
            <div class="search-input-wrapper p-fluid">
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input type="text" pInputText placeholder="Search..." (click)="appMain.searchClick = true" />
              </span>
            </div>
          </ul>
        </li>
        <li
          *ngIf="isAuth"
          #notifications
          class="topbar-item notifications"
          [ngClass]="{
            'active-topmenuitem': appMain.activeTopbarItem === notifications
          }"
        >
          <a href="#" (click)="appMain.onTopbarItemClick($event, notifications)">
            <span class="p-overlay-badge topbar-icon">
              <i class="pi pi-bell" pBadge value="2" severity="danger"></i>
            </span>
          </a>
          <ul class="fadeInDown">
            <li class="layout-submenu-header">
              <h6 class="header-text">Notifications</h6>
              <span class="p-badge">3</span>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-shopping-cart"></i>
                <div class="notifications-item">
                  <h6>Order <span>#2254</span> is placed</h6>
                  <span>Total Amount of <span>$34.50</span></span>
                </div>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-clock"></i>
                <div class="notifications-item">
                  <h6>
                    Meeting with
                    <span>AF04</span> Team
                  </h6>
                  <span>Google Meets</span>
                </div>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-th-large"></i>
                <div class="notifications-item">
                  <h6>Task <span>#41</span> is complete</h6>
                  <span>9 Remaining Tasks</span>
                </div>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-shopping-cart"></i>
                <div class="notifications-item">
                  <h6>Order <span>#2255</span> is placed</h6>
                  <span>Total Amount of <span>$40.45</span></span>
                </div>
              </a>
            </li>
          </ul>
        </li>
        <!-- <li
          *ngIf="isAuth"
          #messages
          class="topbar-item messages"
          [ngClass]="{
            'active-topmenuitem': appMain.activeTopbarItem === messages
          }"
        >
          <a href="#" (click)="appMain.onTopbarItemClick($event, messages)">
            <span class="p-overlay-badge topbar-icon">
              <i class="pi pi-comments" pBadge value="6" severity="danger"></i>
            </span>
          </a>
          <ul class="fadeInDown">
            <li class="layout-submenu-header">
              <h6 class="header-text">Messages</h6>
              <span class="p-badge">5</span>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <img src="assets/layout/images/dashboard/leader-1.png" alt="demo" />
                <div class="messages-item">
                  <h6>Hey! I sent the sales report</h6>
                  <span>Dusana Semenov</span>
                </div>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <img src="assets/layout/images/dashboard/leader-2.png" alt="demo" />
                <div class="messages-item">
                  <h6>OK. Letâ€™s meet at 15 pm...</h6>
                  <span>Edward Lindgren</span>
                </div>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" class="topbar-message" (click)="appMain.onTopbarSubItemClick($event)">
                <img src="assets/layout/images/dashboard/leader-3.png" alt="demo" />
                <div class="messages-item">
                  <h6>Presentation is ready</h6>
                  <span>Noell Blue</span>
                </div>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" class="topbar-message" (click)="appMain.onTopbarSubItemClick($event)">
                <img src="assets/layout/images/dashboard/leader-4.png" alt="demo" />
                <div class="messages-item">
                  <h6>Faulty delivery on #959</h6>
                  <span>Gvozden Boskovsky</span>
                </div>
              </a>
            </li>
          </ul>
        </li> -->
        <li
          #settings
          class="topbar-item settings"
          [ngClass]="{
            'active-topmenuitem': appMain.activeTopbarItem === settings
          }"
        >
          <a href="#" (click)="appMain.onTopbarItemClick($event, settings)">
            <span class="topbar-icon">
              <i class="pi pi-cog"></i>
            </span>
          </a>
          <ul class="fadeInDown">
            <li class="layout-submenu-header">
              <h6 class="header-text">Settings</h6>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-user"></i>
                <div class="settings-item">
                  <h6>Account Info</h6>
                </div>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-users"></i>
                <div class="settings-item">
                  <h6>Global Accounts</h6>
                </div>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-bell"></i>
                <div class="settings-item">
                  <h6>Notification Preferences</h6>
                </div>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-lock"></i>
                <div class="settings-item">
                  <h6>Login Settings</h6>
                </div>
              </a>
            </li>
          </ul>
        </li>
        <li
          #signin
          *ngIf="!isAuth"
          class="topbar-item user-login"
          [ngClass]="{
            'active-topmenuitem': appMain.activeTopbarItem === signin
          }"
        >
          <div class="user-login-buttons">
            <button pButton type="button" label="Login" class="p-button-outlined p-button-success" (click)="showLoginDialog(authModeType.LOGIN)"></button>
            <!-- TODO: Replaces these with styles for margin-->
            &nbsp;
            &nbsp;
            <button pButton type="button" label="Sign Up" (click)="showLoginDialog(authModeType.SIGN_UP)"></button>
          </div>
          <a href="#" (click)="appMain.onTopbarItemClick($event, signin)" class="user-authenticaton-actions-menu">
            <span class="topbar-icon">
              <i class="pi pi-user"></i>
            </span>
          </a>
          <ul class="fadeInDown">
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <button pButton type="button" label="Login" class="p-button-outlined p-button-success" (click)="showLoginDialog(authModeType.LOGIN)" style="width: 100%"></button>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <button pButton type="button" label="Sign Up" style="width: 100%" (click)="showLoginDialog(authModeType.SIGN_UP)"></button>
              </a>
            </li>
          </ul>
        </li>
        <li
          #profile
          class="topbar-item user-profile"
          *ngIf="isAuth"
          [ngClass]="{
            'active-topmenuitem': appMain.activeTopbarItem === profile
          }"
        >
          <a href="#" (click)="appMain.onTopbarItemClick($event, profile)">
            <img class="profile-image" src="assets/layout/images/avatars/{{avatar}}.png" alt="demo" />
            <div class="profile-info">
              <h6>{{ userName }}</h6>
              <span>{{ email }}</span>
            </div>
          </a>

          <ul class="fadeInDown">
            <li class="layout-submenu-header">
              <img class="profile-image" src="assets/layout/images/avatars/{{avatar}}.png" alt="demo" />
              <div class="profile-info">
                <h6>{{ userName }}</h6>
                <span>{{ email }}</span>
              </div>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-cog"></i>
                <h6>Settings</h6>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                <i class="pi pi-file-o"></i>
                <h6>Terms of Usage</h6>
              </a>
            </li>
            <li role="menuitem">
              <a href="#" (click)="logOut()">
                <i class="pi pi-sign-out"></i>
                <h6>Logout</h6>
              </a>
            </li>
          </ul>
        </li>
      </ul>

      <!-- <a class="layout-rightpanel-button" href="#" (click)="appMain.onRightPanelButtonClick($event)">
        <i class="pi pi-arrow-left"></i>
      </a> -->
    </div>
  </div>
</div>

<!-- <app-login-dialog [displayLoginDialog]="displayLoginDialog" [authMode]="authMode"></app-login-dialog> -->
<!-- Login Dialog -->
<p-dialog [header]="authMode.text" [(visible)]="displayLoginDialog" [modal]="true" [breakpoints]="{'960px': '75vw', '640px': '100vw'}"  [style]="{width: '20vw'}" [draggable]="false" [resizable]="false">
  <div [ngSwitch]="authMode.type">
    <form (ngSubmit)="onSubmitLoginForm()" [formGroup]="loginForm" *ngSwitchCase="authModeType.LOGIN">
      <div class="login-form">
        <div class="p-col-12">
          <div class="p-grid">
              <!-- <div class="p-col-5 p-d-flex p-ai-center p-jc-center"> -->
                <div class="p-col-12 p-d-flex p-ai-center p-jc-center">
                  <div class="p-fluid">
                      <div class="p-field">
                          <label for="username">Username or Email</label>
                          <span class="p-input-icon-left">
                            <i class="pi pi-unlock"></i>
                            <input formControlName="usernameOrEmail" type="text" pInputText id="username" type="text"/>
                          </span>
                          <small *ngIf="!loginForm.controls['usernameOrEmail'].valid && loginForm.controls['usernameOrEmail'].touched" class="p-invalid">Please enter your username or email.</small>
                      </div>
                      <div class="p-field">
                          <label for="password">Password</label>
                          <span class="p-input-icon-left">
                            <i class="pi pi-unlock"></i>
                            <input formControlName="password" type="password" pInputText id="password" type="password" />
                          </span>
                          <small *ngIf="!loginForm.controls['password'].valid && loginForm.controls['password'].touched" class="p-invalid">Please enter your password.</small>
                      </div>
                      <p-button label="Login" type="submit" [disabled]="!loginForm.valid" styleClass="p-m-0"></p-button>

                      <br>
                      <br>

                      <!-- <p>Don't have an account? <a href="#" (click)="setAuthMode(authModeType.SIGN_UP)"> Sign up</a></p> -->
                      <p>Don't have an account? <a (click)="setAuthMode(authModeType.SIGN_UP)"> Sign up</a></p>
                      <p><a href="#">Forgot Password?</a></p>
                  </div>
              </div>
              <!-- <div class="p-col-1">
                  <p-divider layout="vertical">
                      <b>OR</b>
                  </p-divider>
              </div>
              <div class="p-col-5 p-ai-center p-jc-center">
                <button pButton type="button" label="Sign in with Google" class="p-button-outlined"></button>
                <button pButton type="button" label="Sign in with Facebook" class="p-button-outlined"></button>
              </div> -->
          </div>
        </div>
        <!-- <p-captcha siteKey="YOUR_SITE_KEY" (onResponse)="showCaptchaResponse($event)"></p-captcha> -->
      </div>
    </form>
    <form (ngSubmit)="onSubmitSignupForm()" [formGroup]="signupForm" *ngSwitchCase="authModeType.SIGN_UP">
      <div class="login-form">
        <div class="p-col-12">
          <div class="p-grid">
              <!-- <div class="p-col-5 p-d-flex p-ai-center p-jc-center"> -->
                <div class="p-col-12 p-d-flex p-ai-center p-jc-center">
                  <div class="p-fluid">
                      <div class="p-field">
                          <label for="username">Username</label>
                          <span class="p-input-icon-left">
                            <i class="pi pi-user"></i>
                            <input formControlName="username" type="text" pInputText id="username" type="text" maxlength="30"/>
                          </span>
                          <small *ngIf="!signupForm.controls['username'].valid && signupForm.controls['username'].touched" class="p-invalid">{{ signupForm.controls['username'] | usernameFormFieldValidator }}</small>
                      </div>
                      <div class="p-field">
                        <label for="email">Email</label>
                        <span class="p-input-icon-left">
                          <i class="pi pi-envelope"></i>
                          <input formControlName="email" type="text" pInputText id="email" type="email"/>
                        </span>
                        <small *ngIf="!signupForm.controls['email'].valid && signupForm.controls['email'].touched" class="p-invalid">{{ signupForm.controls['email'] | emailFormFieldValidator }}</small>
                    </div>
                      <div class="p-field">
                          <label for="password">Password</label>
                          <span class="p-input-icon-left">
                            <i class="pi pi-unlock"></i>
                            <input formControlName="password" type="password" pInputText id="password" type="password"/>
                          </span>
                          <!-- <small *ngIf="!signupForm.controls['password'].valid && signupForm.controls['password'].touched" class="p-invalid">{{ signupForm.controls['password'] | passwordFormFieldValidator }}</small> -->
                          <small *ngIf="!signupForm.controls['password'].valid && signupForm.controls['password'].touched" class="p-invalid">{{ getErrorPassword() }}</small>
                      </div>
                      <div class="p-field">
                        <label for="passwordReenter">Re-enter Password</label>
                        <span class="p-input-icon-left">
                          <i class="pi pi-unlock"></i>
                          <input formControlName="passwordReenter" type="password" pInputText id="passwordReenter" type="password" (input)="onPasswordInput()"/>
                        </span>
                        <!-- <small  class="p-invalid">{{ signupForm.controls['passwordReenter'] | passwordReenterFormFieldValidator }}</small> -->
                        <small *ngIf="!signupForm.controls['passwordReenter'].valid && signupForm.controls['passwordReenter'].touched" class="p-invalid">{{ getErrorPasswordReenter() }}</small>
                    </div>
                      <p-button label="Sign Up" type="submit" [disabled]="!signupForm.valid" styleClass="p-m-0"></p-button>

                      <br />
                      <br />
                      <small
                        >By registering, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy.</a></small
                      >
                      <br />
                      <br />
                      <p>Already have an account? <a (click)="setAuthMode(authModeType.LOGIN)">Login</a></p>
                  </div>
              </div>
              <!-- <div class="p-col-1">
                  <p-divider layout="vertical">
                      <b>OR</b>
                  </p-divider>
              </div>
              <div class="p-col-5 p-ai-center p-jc-center">
                <button pButton type="button" label="Sign in with Google" class="p-button-outlined"></button>
                <button pButton type="button" label="Sign in with Facebook" class="p-button-outlined"></button>
              </div> -->
          </div>
        </div>
        <!-- <p-captcha siteKey="YOUR_SITE_KEY" (onResponse)="showCaptchaResponse($event)"></p-captcha> -->
      </div>
    </form>
  </div>
</p-dialog>

