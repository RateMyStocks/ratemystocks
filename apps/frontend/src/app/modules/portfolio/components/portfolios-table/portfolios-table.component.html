<div class="portfolios-table-filter">
  <mat-form-field appearance="outline">
    <mat-label>Filter</mat-label>
    <input matInput placeholder="Search Portfolios" #input />
    <mat-icon matPrefix>search</mat-icon>
  </mat-form-field>
</div>

<div class="example-container">
  <div class="example-loading-shade" *ngIf="isLoadingResults || errorOccurred">
    <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
    <div class="example-rate-limit-reached" *ngIf="errorOccurred">
      There has been error retrieving portfolios. Please contact us for support!
    </div>
  </div>

  <div class="example-table-container">
    <table
      mat-table
      [dataSource]="data"
      class="example-table"
      matSort
      matSortActive="num_likes"
      matSortDisableClear
      matSortDirection="desc"
    >
      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Portfolio Name</th>
        <td mat-cell *matCellDef="let row">
          <a routerLink="/portfolios/{{ row.id }}"
            ><strong>{{ row.name }}</strong></a
          >
        </td>
      </ng-container>

      <!-- User Column -->
      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Creator</th>
        <td mat-cell *matCellDef="let row">
          <div class="centered-content">
            <img src="../../../../../assets/images/avatars/antelope.png" class="profile-picture" />
            <a routerLink="/">{{ row.username }}</a>
          </div>
        </td>
      </ng-container>

      <!-- Number of Likes Column-->
      <ng-container matColumnDef="num_likes">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Likes</th>
        <td mat-cell *matCellDef="let row">{{ row.num_likes }}</td>
      </ng-container>

      <!-- Number of Dislikes Column-->
      <ng-container matColumnDef="num_dislikes">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Dislikes</th>
        <td mat-cell *matCellDef="let row">{{ row.num_dislikes }}</td>
      </ng-container>

      <!-- Number of Holdings -->
      <ng-container matColumnDef="num_holdings">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Holdings</th>
        <td mat-cell *matCellDef="let row">{{ row.num_holdings }}</td>
      </ng-container>

      <!-- Largest Column -->
      <ng-container matColumnDef="largest_holding">
        <th mat-header-cell *matHeaderCellDef>Largest Holding</th>
        <td mat-cell *matCellDef="let row">
          <a routerLink="/stocks/{{ row.largest_holding }}">{{ row.largest_holding }}</a>
        </td>
      </ng-container>

      <!-- Last Updated Column-->
      <ng-container matColumnDef="last_updated">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Updated</th>
        <td mat-cell *matCellDef="let row">{{ moment(row.last_updated).format('MM/DD/YYYY') }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>

  <mat-paginator [length]="resultsLength" [pageSize]="50"></mat-paginator>
</div>
